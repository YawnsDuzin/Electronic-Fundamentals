# Phase 6: 실전 프로젝트 (Practical Projects)

## 개요

Phase 6는 지금까지 학습한 전자공학 기초 지식을 실제 프로젝트에 적용하는 단계입니다.
각 프로젝트는 난이도가 점진적으로 증가하며, 최종적으로 여러 센서와 액추에이터를
통합하는 IoT 시스템을 구축합니다.

**대상:** ESP32 기반 전자공학 입문자 ~ 중급자
**개발 환경:** Arduino IDE 2.x 또는 PlatformIO
**보드:** ESP32 DevKit V1 (또는 호환 보드)

---

## 프로젝트 목록

| 번호 | 프로젝트 | 난이도 | 핵심 학습 내용 |
|------|---------|--------|---------------|
| 1 | LED + 버튼 제어 | ★☆☆☆☆ | 디지털 입출력, 디바운싱, 인터럽트 |
| 2 | 아날로그 센서 읽기 (MQ-2) | ★★☆☆☆ | ADC, 전압분배, 이동평균 필터 |
| 3 | I2C 센서 연결 (SHT30 + BMP280) | ★★★☆☆ | I2C 프로토콜, 멀티센서, 라이브러리 활용 |
| 4 | 릴레이로 외부 장치 제어 | ★★★☆☆ | 트랜지스터 구동, 릴레이, 고전압 안전 |
| 5 | 통합 센서 시스템 | ★★★★★ | WiFi, 웹서버, 다중센서, 릴레이 통합 |

---

## 프로젝트 상세

### 프로젝트 1: LED + 버튼 제어
**난이도:** ★☆☆☆☆ (입문)

가장 기본적인 디지털 입출력 프로젝트입니다. 버튼을 눌러 LED를 제어하면서
소프트웨어 디바운싱, 하드웨어 인터럽트, 상태 머신 개념을 학습합니다.

**학습 목표:**
- GPIO 디지털 입출력 설정
- 풀업/풀다운 저항의 이해
- 소프트웨어 디바운싱 구현
- 하드웨어 인터럽트 활용
- 여러 LED 순차 제어 (시프트 패턴)

**필요 부품:** ESP32, LED 4개, 택트 스위치 2개, 저항(220옴, 10K옴)

---

### 프로젝트 2: 아날로그 센서 읽기 (MQ-2 가스센서)
**난이도:** ★★☆☆☆ (초급)

MQ-2 가스센서를 사용하여 아날로그 값을 읽고, 가스 농도에 따른 경고 시스템을
구축합니다. ADC 변환, 전압 계산, 이동 평균 필터를 학습합니다.

**학습 목표:**
- ESP32 ADC (12비트) 사용법
- 아날로그 전압 변환 계산
- 센서 값 캘리브레이션
- 이동 평균 필터로 노이즈 제거
- 임계값 기반 경고 시스템

**필요 부품:** ESP32, MQ-2 가스센서 모듈, LED(빨강/노랑/초록), 저항, 부저

---

### 프로젝트 3: I2C 센서 연결 (SHT30 + BMP280)
**난이도:** ★★★☆☆ (중급)

I2C 버스에 SHT30 온습도 센서와 BMP280 기압센서를 동시에 연결하여
환경 데이터를 수집합니다. I2C 프로토콜과 라이브러리 활용법을 학습합니다.

**학습 목표:**
- I2C 프로토콜 원리 (SDA, SCL)
- I2C 주소 스캐닝
- 다중 센서 동시 통신
- Adafruit 라이브러리 활용
- 풀업 저항 설계

**필요 부품:** ESP32, SHT30 모듈, BMP280 모듈, 4.7K옴 풀업 저항 2개

---

### 프로젝트 4: 릴레이로 외부 장치 제어
**난이도:** ★★★☆☆ (중급)

트랜지스터와 릴레이를 사용하여 외부 장치(팬, 조명 등)를 제어합니다.
트랜지스터 스위칭 회로, 플라이백 다이오드, 고전압 안전 주의사항을 학습합니다.

**학습 목표:**
- NPN 트랜지스터 스위칭 회로
- 릴레이 동작 원리 (NO, NC, COM)
- 플라이백 다이오드의 역할
- 시리얼 명령 기반 제어
- 타이머 기반 자동 제어

**필요 부품:** ESP32, 5V 릴레이 모듈, 2N2222 트랜지스터, 1N4007 다이오드, 1K옴 저항

> **경고:** 이 프로젝트는 AC 220V를 다룰 수 있습니다. 반드시 안전 수칙을 준수하세요!

---

### 프로젝트 5: 통합 센서 시스템
**난이도:** ★★★★★ (고급)

모든 프로젝트의 요소를 통합하여 WiFi 웹서버 기반의 환경 모니터링 시스템을
구축합니다. 실시간 데이터 표시, 자동 제어, JSON API를 제공합니다.

**학습 목표:**
- 다중 센서 통합 (SHT30 + MQ-2)
- WiFi 연결 및 웹서버 구축
- 임계값 초과 시 릴레이 자동 제어
- JSON 형태 데이터 출력
- millis() 기반 비동기 태스크 관리
- OTA(Over-The-Air) 펌웨어 업데이트

**필요 부품:** 이전 프로젝트 부품 전체 + WiFi 환경

---

## 학습 순서 및 권장 사항

```
프로젝트 1 (LED+버튼)
    │
    ▼
프로젝트 2 (아날로그 센서)
    │
    ▼
프로젝트 3 (I2C 센서)
    │
    ▼
프로젝트 4 (릴레이 제어)
    │
    ▼
프로젝트 5 (통합 시스템) ← 모든 프로젝트 통합
```

### 권장 학습 방법
1. **순서대로 진행하세요** - 각 프로젝트는 이전 프로젝트의 지식을 기반으로 합니다
2. **코드를 직접 입력하세요** - 복사/붙여넣기 대신 직접 타이핑하면 이해도가 높아집니다
3. **변형해 보세요** - 기본 코드를 이해한 후, 자신만의 기능을 추가해 보세요
4. **트러블슈팅을 즐기세요** - 오류 해결 과정에서 가장 많이 배웁니다
5. **회로도를 먼저 그리세요** - 코딩 전에 항상 회로를 먼저 설계하고 검증하세요

---

## 공통 준비물

| 부품 | 수량 | 비고 |
|------|------|------|
| ESP32 DevKit V1 | 1 | 30핀 또는 38핀 |
| 브레드보드 (830홀) | 1 | 전원 레일 포함 |
| 점퍼 와이어 세트 | 1 | M-M, M-F, F-F 각 20개 |
| USB 케이블 (Micro-B) | 1 | 데이터 전송 가능한 것 |
| LED (빨강, 초록, 노랑, 파랑) | 각 2개 | 5mm |
| 택트 스위치 | 3 | 4핀 |
| 저항 키트 | 1 | 220옴, 1K, 4.7K, 10K |
| MQ-2 가스센서 모듈 | 1 | 아날로그 출력 |
| SHT30 센서 모듈 | 1 | I2C 인터페이스 |
| BMP280 센서 모듈 | 1 | I2C 인터페이스 |
| 5V 릴레이 모듈 | 1 | 1채널 |
| 2N2222 트랜지스터 | 2 | NPN |
| 1N4007 다이오드 | 2 | 정류용 |
| 능동 부저 | 1 | 5V |
| 멀티미터 | 1 | 전압/전류/저항 측정용 |

---

## 개발 환경 설정

### Arduino IDE 설정
1. Arduino IDE 2.x 설치
2. ESP32 보드 매니저 URL 추가:
   `https://raw.githubusercontent.com/espressif/arduino-esp32/gh-pages/package_esp32_index.json`
3. 보드 매니저에서 "ESP32" 검색 후 설치
4. 보드 선택: "ESP32 Dev Module"
5. 업로드 속도: 921600
6. 시리얼 모니터 보드레이트: 115200

### 필요 라이브러리
- `Adafruit SHT31` (프로젝트 3, 5)
- `Adafruit BMP280` (프로젝트 3)
- `Adafruit Unified Sensor` (프로젝트 3)
- `ArduinoJson` (프로젝트 5)
- `ArduinoOTA` (프로젝트 5, 내장)

---

## 안전 주의사항

1. **전원 차단 후 회로 변경** - 회로를 수정할 때는 반드시 전원을 분리하세요
2. **극성 확인** - LED, 다이오드, 전해 콘덴서 등의 극성을 확인하세요
3. **전류 제한** - GPIO 핀의 최대 출력 전류(12mA 권장, 40mA 절대 최대)를 초과하지 마세요
4. **고전압 주의** - 릴레이 프로젝트에서 AC 전원을 다룰 때 각별히 주의하세요
5. **단락 방지** - 배선 전 회로도를 반드시 확인하고, 단락(쇼트)이 없는지 점검하세요
6. **정전기 방지** - ESP32를 다루기 전 접지된 금속을 만져 정전기를 방전하세요

---

## 디렉토리 구조

```
phase6-projects/
├── README.md                          ← 현재 문서
├── project1-led-button/
│   ├── README.md                      ← 프로젝트 1 설명서
│   └── code/
│       └── led_button.ino             ← LED + 버튼 제어 코드
├── project2-analog-sensor/
│   ├── README.md                      ← 프로젝트 2 설명서
│   └── code/
│       └── mq2_gas_sensor.ino         ← MQ-2 가스센서 코드
├── project3-i2c-sensor/
│   ├── README.md                      ← 프로젝트 3 설명서
│   └── code/
│       └── sht30_bmp280.ino           ← SHT30 + BMP280 코드
├── project4-relay-control/
│   ├── README.md                      ← 프로젝트 4 설명서
│   └── code/
│       └── relay_control.ino          ← 릴레이 제어 코드
└── project5-integrated-system/
    ├── README.md                      ← 프로젝트 5 설명서
    └── code/
        └── integrated_sensor_system.ino  ← 통합 시스템 코드
```

---

## 참고 자료

- [ESP32 공식 문서](https://docs.espressif.com/projects/esp-idf/en/latest/esp32/)
- [Arduino ESP32 GitHub](https://github.com/espressif/arduino-esp32)
- [ESP32 핀맵 참고](https://randomnerdtutorials.com/esp32-pinout-reference-gpios/)
- [Adafruit 센서 라이브러리](https://github.com/adafruit)

---

*Phase 6는 이론을 실전으로 연결하는 가장 중요한 단계입니다. 각 프로젝트를 완성할 때마다 전자공학에 대한 자신감이 한 단계씩 높아질 것입니다.*
