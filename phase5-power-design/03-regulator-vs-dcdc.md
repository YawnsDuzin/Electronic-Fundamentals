# 03. 레귤레이터 vs DC-DC 컨버터 (Regulator vs DC-DC Converter)

## 개요

전원을 원하는 전압으로 변환하는 데는 크게 두 가지 방법이 있습니다:
**리니어 레귤레이터(LDO)**와 **스위칭 레귤레이터(DC-DC 컨버터)**입니다.

각각의 장단점을 이해하고 상황에 맞게 선택하는 것이 좋은 전원 설계의 핵심입니다.

```
    전압 변환 방식 비교:

    ┌──────────────────────────────┐    ┌──────────────────────────────┐
    │   리니어 레귤레이터 (LDO)     │    │   스위칭 레귤레이터 (DC-DC)   │
    ├──────────────────────────────┤    ├──────────────────────────────┤
    │                              │    │                              │
    │  12V ──▶ [열로 소비] ──▶ 3.3V│    │  12V ──▶ [스위칭] ──▶ 3.3V  │
    │                              │    │                              │
    │  효율: ~28%  🔥 뜨거움      │    │  효율: ~90%  😎 시원함       │
    │  장점: 단순, 저노이즈         │    │  장점: 고효율, 발열 적음     │
    │  단점: 발열, 저효율           │    │  단점: 노이즈, 복잡           │
    └──────────────────────────────┘    └──────────────────────────────┘
```

---

## 1. 리니어 레귤레이터(LDO) 원리

### 1.1 LDO란?

**LDO (Low Drop-Out Regulator)**는 입력 전압에서 출력 전압을 뺀 나머지를
**열(Heat)**로 소비하여 전압을 낮추는 방식입니다.

"수도 꼭지"에 비유하면 이해가 쉽습니다:

```
    수도관(수압=입력전압)에서 물이 나올 때,
    꼭지를 조여서(저항) 수압을 낮추는 것과 같습니다.
    줄어든 수압(전압)만큼의 에너지는 열로 변합니다.

    입력 전압 (12V)
        │
        ▼
    ┌───────────┐
    │           │   ← 여기서 (12V - 3.3V) = 8.7V 분의
    │   LDO     │      에너지가 열로 변환됨
    │ (조절기)   │
    └───┬───────┘
        │
        ▼
    출력 전압 (3.3V)   안정된 전압 출력!
```

### 1.2 LDO의 내부 동작 원리

```
    LDO 내부 블록도:

    V_IN ──────┬───────────┐
               │           │
               │     ┌─────┴─────┐
               │     │ Pass      │
               │     │ Transistor│  ← 가변 저항처럼 동작
               │     │ (통과소자) │     전압차를 조절
               │     └─────┬─────┘
               │           │
               │     V_OUT ├──────── 출력
               │           │
               │     ┌─────┴─────┐
               │     │ 저항 분배기 │  ← 출력 전압을 감지
               │     └─────┬─────┘
               │           │
               │     ┌─────┴─────┐
               └─────┤ 오차 증폭기 │  ← 기준 전압과 비교하여
                     │ (Error Amp)│     통과소자를 제어
                     └─────┬─────┘
                           │
                     ┌─────┴─────┐
                     │ 기준 전압   │  ← 정밀한 내부 기준
                     │ (Reference)│     (예: 1.25V)
                     └───────────┘

    동작 과정:
    1. 출력 전압이 목표보다 낮아지면 → 통과소자 더 열림 → 전압 상승
    2. 출력 전압이 목표보다 높아지면 → 통과소자 더 닫힘 → 전압 하강
    3. 이 피드백이 매우 빠르게 반복 → 안정된 출력 유지
```

### 1.3 "Drop-Out"이란?

**드롭아웃 전압(Dropout Voltage)**은 LDO가 정상 동작하기 위해 필요한
**입력 전압과 출력 전압의 최소 차이**입니다.

```
    ┌─────────────────────────────────────────────────────┐
    │                                                     │
    │  V_IN (최소) = V_OUT + V_DROPOUT                    │
    │                                                     │
    │  예: AMS1117-3.3                                    │
    │      V_OUT = 3.3V                                   │
    │      V_DROPOUT = 1.1V (최대, 1A 부하 시)            │
    │      V_IN (최소) = 3.3 + 1.1 = 4.4V                │
    │                                                     │
    │  → 입력 전압이 4.4V 미만이면 3.3V를 유지 못함!      │
    │                                                     │
    └─────────────────────────────────────────────────────┘
```

| LDO 종류 | 드롭아웃 전압 | 분류 |
|----------|-------------|------|
| 7805 (구형) | ~2.0V | 일반 레귤레이터 |
| AMS1117 | ~1.1V | LDO |
| MCP1700 | ~0.178V | 초저 드롭아웃 |
| AP2112 | ~0.25V | 초저 드롭아웃 |
| HT7333 | ~0.1V | 극저 드롭아웃 |

---

## 2. 스위칭 레귤레이터(DC-DC 컨버터) 원리

### 2.1 DC-DC 컨버터란?

**DC-DC 컨버터**는 스위칭(ON/OFF)을 매우 빠르게 반복하여 전압을 변환합니다.
에너지를 열로 버리지 않고 **인덕터(코일)에 에너지를 저장했다가 방출**하는 방식이므로
효율이 매우 높습니다.

```
    DC-DC 컨버터의 비유: "양동이 릴레이"

    높은 수위(12V)에서 낮은 수위(3.3V)로 물을 옮길 때,
    - LDO: 파이프로 흘려보내며 압력을 열로 낭비
    - DC-DC: 양동이로 조금씩 퍼서 효율적으로 전달

    스위칭(ON/OFF)을 초당 수십만~수백만 번 반복!
```

### 2.2 Buck(강압) 컨버터 동작 원리

**Buck 컨버터**는 입력 전압보다 **낮은** 출력 전압을 만듭니다. (Step-Down)

```
    Buck 컨버터 기본 회로:

    V_IN ────┐
             │
          ┌──┴──┐
          │ SW  │  ← MOSFET 스위치 (고속 ON/OFF)
          └──┬──┘
             │
             ├──── [L: 인덕터] ────┬──── V_OUT
             │                     │
          ┌──┴──┐              ┌───┴───┐
          │  D  │  ← 다이오드  │  C    │  ← 커패시터
          │     │   (프리휠링)  │(출력) │    (평활)
          └──┬──┘              └───┬───┘
             │                     │
            GND                   GND


    동작 파형:

    스위치 ON  │  스위치 OFF │  스위치 ON  │  스위치 OFF
    ──────────┼────────────┼──────────┼────────────
              │            │          │
    V_SW ─────┐     ┌──────┘     ┌────┘     ┌──────
    (스위치)   └─────┘            └──────────┘

    I_L  ──╱╲──╱╲──╱╲──╱╲──╱╲──╱╲──╱╲──╱╲──
    (인덕터)    리플 전류 (삼각파 형태)

    V_OUT ─────────────────────────────────────
    (출력)  평탄한 DC 출력 (커패시터가 리플을 흡수)
```

#### Buck 컨버터 출력 전압 공식

```
    V_OUT = V_IN × D

    D = 듀티비 (Duty Cycle) = T_ON / (T_ON + T_OFF)

    예: V_IN = 12V, 원하는 V_OUT = 3.3V
        D = 3.3 / 12 = 0.275 = 27.5%
        → 스위치가 27.5%의 시간만 ON
```

### 2.3 Boost(승압) 컨버터 동작 원리

**Boost 컨버터**는 입력 전압보다 **높은** 출력 전압을 만듭니다. (Step-Up)

```
    Boost 컨버터 기본 회로:

    V_IN ──── [L: 인덕터] ────┬────── [D: 다이오드] ──┬── V_OUT
                              │                       │
                           ┌──┴──┐                 ┌──┴──┐
                           │ SW  │  ← 스위치       │  C  │ ← 커패시터
                           └──┬──┘                 └──┬──┘
                              │                       │
                             GND                     GND

    동작 원리:
    1. 스위치 ON → 인덕터에 에너지 저장 (전류 증가)
    2. 스위치 OFF → 인덕터가 에너지 방출
       → V_IN + V_인덕터 = V_OUT (입력보다 높은 전압!)
    3. 다이오드가 역류 방지, 커패시터가 에너지 저장
```

#### Boost 컨버터 출력 전압 공식

```
    V_OUT = V_IN / (1 - D)

    예: V_IN = 3.3V, 원하는 V_OUT = 5V
        D = 1 - (V_IN / V_OUT) = 1 - (3.3/5) = 0.34 = 34%
```

### 2.4 Buck-Boost 컨버터

**Buck-Boost 컨버터**는 입력 전압이 출력 전압보다 높거나 낮아도 동작합니다.

```
    사용 사례:
    ─────────────────────────────────────────────
    리튬 배터리(3.0~4.2V) → 3.3V 출력

    배터리 전압 변화:
    4.2V (만충) ──▶ 3.7V (보통) ──▶ 3.0V (방전)

    - 4.2V일 때: Buck(강압) 동작 → 3.3V
    - 3.3V일 때: 패스스루 → 3.3V
    - 3.0V일 때: Boost(승압) 동작 → 3.3V

    → 배터리를 끝까지 사용할 수 있음!
    ─────────────────────────────────────────────
```

---

## 3. 효율 비교

### 3.1 효율 공식

```
    ┌─────────────────────────────────────────────────────┐
    │                                                     │
    │  효율(η) = P_OUT / P_IN × 100%                     │
    │          = (V_OUT × I_OUT) / (V_IN × I_IN) × 100%  │
    │                                                     │
    └─────────────────────────────────────────────────────┘
```

### 3.2 LDO의 효율

LDO의 효율은 **입력/출력 전압 비율로만 결정**됩니다.

```
    LDO 효율 = V_OUT / V_IN × 100%

    ┌─────────────────────────────────────────────────────┐
    │  입력    출력    효율     열 손실 (500mA 부하 시)     │
    ├─────────────────────────────────────────────────────┤
    │  5.0V → 3.3V   66%     (5.0-3.3)×0.5 = 0.85W     │
    │  7.4V → 3.3V   45%     (7.4-3.3)×0.5 = 2.05W     │
    │  9.0V → 3.3V   37%     (9.0-3.3)×0.5 = 2.85W     │
    │ 12.0V → 3.3V   28%     (12-3.3)×0.5 = 4.35W  🔥  │
    │  5.0V → 3.3V   66%     (5.0-3.3)×0.1 = 0.17W     │
    │ 12.0V → 5.0V   42%     (12-5.0)×0.5 = 3.50W  🔥  │
    └─────────────────────────────────────────────────────┘

    ※ 입출력 전압차가 클수록, 전류가 클수록 열이 많이 발생!
```

### 3.3 DC-DC 컨버터의 효율

DC-DC 컨버터는 보통 **85~95%** 효율을 냅니다.

```
    DC-DC 효율 비교 (500mA 부하, 3.3V 출력):

    ┌─────────────────────────────────────────────────────┐
    │  입력      LDO 효율    DC-DC 효율    DC-DC 열 손실  │
    ├─────────────────────────────────────────────────────┤
    │   5.0V      66%         90%          0.18W         │
    │   7.4V      45%         90%          0.18W         │
    │   9.0V      37%         90%          0.18W         │
    │  12.0V      28%         90%          0.18W         │
    └─────────────────────────────────────────────────────┘

    DC-DC는 입력 전압에 관계없이 효율이 거의 일정!
```

### 3.4 효율 비교 그래프 (개념도)

```
    효율(%)
    100 ┤                          ┌─────────── DC-DC (90%)
        │                    ┌─────┘
     90 ┤               ┌────┘
        │          ┌─────┘
     80 ┤     ┌────┘
        │┌────┘
     70 ┤│
        ││        ╲
     60 ┤│         ╲
        ││          ╲  LDO
     50 ┤│           ╲
        ││            ╲
     40 ┤│             ╲
        ││              ╲
     30 ┤│               ╲
        ││                ╲
     20 ┤│                 ╲
        │
     10 ┤
        │
      0 ┼─────┬─────┬─────┬─────┬─────▶ V_IN
              5V    7V    9V   12V   15V

    (V_OUT = 3.3V, 500mA 기준)
```

---

## 4. 발열 계산

### 4.1 LDO의 발열 공식

```
    ┌─────────────────────────────────────────────────────┐
    │                                                     │
    │  P_열 = (V_IN - V_OUT) × I_OUT                     │
    │                                                     │
    │  이 열을 방출하지 못하면 LDO가 과열됩니다!           │
    │                                                     │
    └─────────────────────────────────────────────────────┘
```

### 4.2 발열 계산 예제

**예제 1: 5V → 3.3V, 300mA**

```
    P_열 = (5.0 - 3.3) × 0.3 = 0.51W

    → 손으로 만지면 따뜻한 정도
    → 방열판 불필요
```

**예제 2: 12V → 3.3V, 500mA**

```
    P_열 = (12.0 - 3.3) × 0.5 = 4.35W

    → 매우 뜨거움! (화상 위험)
    → 큰 방열판 필요 또는 DC-DC 사용 권장
```

**예제 3: 12V → 5V, 1A**

```
    P_열 = (12.0 - 5.0) × 1.0 = 7.0W

    → 매우 위험한 수준!
    → 반드시 DC-DC 컨버터 사용!
```

### 4.3 발열 수준 판단 가이드

| 발열량 (W) | 체감 온도 | 방열 대책 |
|-----------|----------|-----------|
| < 0.5W | 약간 따뜻 | 필요 없음 |
| 0.5~1.0W | 따뜻~뜨거움 | 작은 방열판 권장 |
| 1.0~2.0W | 뜨거움 | 방열판 필수 |
| 2.0~3.0W | 매우 뜨거움 | 큰 방열판 + 통풍 |
| > 3.0W | 위험 | **DC-DC 컨버터로 교체!** |

### 4.4 접합 온도 계산 (심화)

```
    T_j = T_a + (P_열 × θ_JA)

    T_j  : 접합 온도 (IC 내부 온도)
    T_a  : 주변 온도 (보통 25°C)
    P_열 : 발열량 (W)
    θ_JA : 열저항 (°C/W) - 데이터시트에서 확인

    예: AMS1117 (SOT-223 패키지)
        θ_JA = 90°C/W (방열판 없이)
        P_열 = 0.85W (5V→3.3V, 500mA)

        T_j = 25 + (0.85 × 90) = 25 + 76.5 = 101.5°C

        최대 접합 온도: 125°C
        → 여유가 있지만 꽤 뜨거움!

    ※ 접합 온도가 최대 허용 온도에 가까우면
       써멀 셧다운이 발생하거나 수명이 짧아집니다.
```

---

## 5. 언제 LDO? 언제 DC-DC? 선택 가이드

### 5.1 선택 기준 요약

```
    시작
     │
     ▼
    입출력 전압차가 2V 이하인가?
     │          │
     예         아니오
     │          │
     ▼          ▼
    전류가       DC-DC 컨버터
    200mA       사용 권장
    이하인가?
     │     │
     예    아니오
     │     │
     ▼     ▼
    LDO    노이즈가 중요한가?
    사용    │          │
           예         아니오
           │          │
           ▼          ▼
          LDO +      DC-DC
          방열판      컨버터
          (또는 LDO
           후단에 추가)
```

### 5.2 상세 비교표

| 특성 | LDO (리니어) | DC-DC (스위칭) |
|------|-------------|---------------|
| **효율** | 낮음 (V_OUT/V_IN × 100%) | 높음 (85~95%) |
| **발열** | 많음 (전압차 × 전류) | 적음 |
| **출력 노이즈** | 매우 낮음 (깨끗) | 높음 (스위칭 노이즈) |
| **회로 복잡도** | 단순 (커패시터 2개면 충분) | 복잡 (인덕터, 다이오드 등) |
| **부품 크기** | 작음 | 상대적으로 큼 (인덕터) |
| **비용** | 저렴 (~100원) | 비쌈 (~1,000원 이상) |
| **승압 가능** | 불가능 (강압만) | 가능 (Boost, Buck-Boost) |
| **드롭아웃** | 있음 (최소 전압차 필요) | 거의 없음 |
| **응답 속도** | 빠름 | 상대적으로 느림 |
| **EMI** | 거의 없음 | 있음 (차폐 필요할 수 있음) |

### 5.3 사용 시나리오별 추천

| 시나리오 | 추천 | 이유 |
|----------|------|------|
| USB 5V → ESP32 3.3V (200mA) | **LDO** | 전압차 작고 전류 적음 |
| 12V 어댑터 → ESP32 3.3V | **DC-DC** | 전압차 커서 LDO 발열 심함 |
| 배터리 3.7V → ESP32 3.3V | **LDO** | 전압차 0.4V, 효율 89% |
| 배터리 3.7V → 5V (센서용) | **DC-DC (Boost)** | 승압 필요 |
| ADC/DAC 전원 | **LDO** | 노이즈 민감한 회로 |
| 고전류 LED 구동 | **DC-DC** | 효율 중요 |
| 배터리 수명 최대화 | **DC-DC** | 효율이 배터리 수명에 직결 |
| 아날로그 센서 + ESP32 | **DC-DC + LDO** | DC-DC로 효율, LDO로 정전원 |

---

## 6. 대표 부품 소개

### 6.1 AMS1117-3.3 (LDO)

```
    ┌──────────────────────────────────────────────┐
    │              AMS1117-3.3                      │
    ├──────────────────────────────────────────────┤
    │  종류:       LDO 레귤레이터                   │
    │  입력 전압:  4.4V ~ 15V                      │
    │  출력 전압:  3.3V (고정)                      │
    │  최대 전류:  1A (방열판 필수)                  │
    │  드롭아웃:   1.1V (1A 시)                    │
    │  패키지:     SOT-223, TO-252                 │
    │  가격:       100~300원                       │
    ├──────────────────────────────────────────────┤
    │                                              │
    │  연결 회로:                                   │
    │                                              │
    │  V_IN ──┬── [C1: 22μF] ──┐                  │
    │         │                 │                  │
    │         └── AMS1117 ──┬──┴── GND            │
    │              │        │                      │
    │              └── V_OUT ┬── [C2: 22μF] ── GND│
    │                       │                      │
    │                       └── 3.3V 출력          │
    │                                              │
    │  핀 배치 (SOT-223):                          │
    │  ┌─────────┐                                 │
    │  │ 1  2  3 │  1: GND/Adjust                 │
    │  └────┬────┘  2: V_OUT                      │
    │       4       3: V_IN                        │
    │               4: V_OUT (탭)                   │
    └──────────────────────────────────────────────┘

    ⚠️ 주의: 입력/출력에 커패시터(22μF 이상) 필수!
       커패시터 없이 사용하면 발진(불안정)할 수 있음
```

> **참고**: 대부분의 ESP32 개발 보드(예: ESP32-DevKitC)에는 AMS1117-3.3이 이미
> 탑재되어 있어서 USB 5V를 3.3V로 변환합니다.

### 6.2 LM2596 (Buck DC-DC 컨버터)

```
    ┌──────────────────────────────────────────────┐
    │              LM2596                          │
    ├──────────────────────────────────────────────┤
    │  종류:       Step-Down (Buck) DC-DC          │
    │  입력 전압:  4.5V ~ 40V                      │
    │  출력 전압:  1.23V ~ 37V (가변형)            │
    │              3.3V, 5V, 12V (고정형)           │
    │  최대 전류:  3A                              │
    │  스위칭 주파수: 150kHz                        │
    │  효율:       ~85%                            │
    │  가격:       500~2,000원 (모듈)              │
    ├──────────────────────────────────────────────┤
    │                                              │
    │  LM2596 모듈 연결:                           │
    │                                              │
    │  V_IN(+) ─────── IN+ ┌──────────┐ OUT+ ── V_OUT(+)│
    │                       │ LM2596  │                  │
    │                       │  모듈   │                  │
    │  V_IN(-) ─────── IN- └──────────┘ OUT- ── V_OUT(-)│
    │                                              │
    │  ※ 가변형은 트리밍 저항(가변저항)으로         │
    │    출력 전압을 조절합니다.                     │
    │    멀티미터로 확인하며 조절하세요!            │
    │                                              │
    └──────────────────────────────────────────────┘
```

### 6.3 MT3608 (Boost DC-DC 컨버터)

```
    ┌──────────────────────────────────────────────┐
    │              MT3608                           │
    ├──────────────────────────────────────────────┤
    │  종류:       Step-Up (Boost) DC-DC           │
    │  입력 전압:  2V ~ 24V                        │
    │  출력 전압:  최대 28V (가변형)                │
    │  최대 전류:  2A                              │
    │  스위칭 주파수: 1.2MHz                       │
    │  효율:       ~93% (최적 조건)                │
    │  가격:       500~1,500원 (모듈)              │
    ├──────────────────────────────────────────────┤
    │                                              │
    │  대표 사용 사례:                              │
    │                                              │
    │  리튬 배터리 (3.7V) → 5V 출력                │
    │  AA 건전지 2개 (3V) → 5V 출력                │
    │  USB 5V → 9V/12V 출력                        │
    │                                              │
    │  ⚠️ 주의:                                    │
    │  - 출력 전류는 입력 전압에 따라 달라짐         │
    │  - 전압을 많이 올릴수록 출력 전류 감소         │
    │  - P_OUT ≤ P_IN × η (효율)                   │
    │                                              │
    └──────────────────────────────────────────────┘
```

### 6.4 대표 부품 비교표

| 특성 | AMS1117-3.3 (LDO) | LM2596 (Buck) | MT3608 (Boost) |
|------|-------------------|---------------|----------------|
| 종류 | 리니어 (강압) | 스위칭 (강압) | 스위칭 (승압) |
| 입력 범위 | 4.4~15V | 4.5~40V | 2~24V |
| 출력 전압 | 3.3V 고정 | 가변/고정 | 가변 |
| 최대 전류 | 1A | 3A | 2A |
| 효율 | ~66% (5V입력) | ~85% | ~93% |
| 노이즈 | 매우 낮음 | 보통 | 보통 |
| 외부 부품 | 커패시터 2개 | 인덕터+다이오드+커패시터 | 인덕터+다이오드+커패시터 |
| 가격 | 100~300원 | 500~2,000원 | 500~1,500원 |
| 난이도 | 초보자용 | 중급자용 | 중급자용 |

---

## 7. 노이즈 관점: LDO가 더 깨끗하다

### 7.1 왜 DC-DC는 노이즈가 많은가?

DC-DC 컨버터는 스위칭 동작으로 인해 **스위칭 주파수와 그 고조파(하모닉)에서 노이즈**가 발생합니다.

```
    출력 전압 파형 비교:

    LDO 출력:
    3.30V ─────────────────────────────────── 깨끗!
    3.29V

    DC-DC 출력:
    3.33V ──╱╲──╱╲──╱╲──╱╲──╱╲──╱╲── 리플 노이즈!
    3.27V     ╲╱    ╲╱    ╲╱    ╲╱
              (스위칭 주파수의 리플)

    LDO 리플:    ~1mV (매우 작음)
    DC-DC 리플:  ~30~100mV (상대적으로 큼)
```

### 7.2 노이즈가 문제가 되는 경우

| 용도 | 노이즈 민감도 | 추천 전원 |
|------|-------------|-----------|
| 디지털 회로 (ESP32, LED 등) | 낮음 | DC-DC OK |
| ADC/DAC (아날로그 변환) | **높음** | LDO 권장 |
| 오디오 회로 | **매우 높음** | LDO 필수 |
| RF 회로 (Wi-Fi, BT) | **높음** | LDO 또는 필터링된 DC-DC |
| 정밀 센서 (온도, 압력) | 보통~높음 | LDO 권장 |

### 7.3 실전 조합: DC-DC + LDO

고효율과 저노이즈를 모두 얻는 방법입니다.

```
    12V 입력
       │
       ▼
    ┌──────────┐     5V      ┌──────────┐     3.3V
    │  DC-DC   ├────────────▶│   LDO    ├──────────▶ ESP32, 센서
    │ (LM2596) │  (효율적    │(AMS1117) │  (깨끗한
    │ 12V→5V   │   전압 강압)│  5V→3.3V │   전원)
    └──────────┘             └──────────┘

    효과:
    - DC-DC가 12V→5V 효율적 변환 (발열 최소)
    - LDO가 5V→3.3V 정밀 변환 (노이즈 최소)
    - 전체 효율: ~85% × ~66% = ~56% (12V→3.3V LDO 단독의 28%보다 훨씬 나음!)
    - LDO 발열: (5-3.3)×0.5 = 0.85W (관리 가능)
```

### 7.4 DC-DC 노이즈 줄이는 방법

```
    ┌─────────────────────────────────────────────────────┐
    │          DC-DC 노이즈 저감 방법                      │
    ├─────────────────────────────────────────────────────┤
    │                                                     │
    │  1. 출력 커패시터 추가                               │
    │     - 세라믹 + 전해 커패시터 병렬 사용               │
    │     - 세라믹: 100nF (고주파 노이즈 제거)            │
    │     - 전해: 100~470μF (저주파 리플 제거)            │
    │                                                     │
    │  2. LC 필터 추가                                    │
    │     DC-DC 출력 ─[L]─┬─ 깨끗한 전원                  │
    │                  [C]                                │
    │                   │                                 │
    │                  GND                                │
    │                                                     │
    │  3. 페라이트 비드 사용                               │
    │     - 고주파 노이즈를 열로 흡수                      │
    │                                                     │
    │  4. 접지(GND) 배선 최적화                            │
    │     - 아날로그 GND와 디지털 GND 분리                 │
    │     - 별 모양(Star) 접지 권장                        │
    │                                                     │
    └─────────────────────────────────────────────────────┘
```

---

## 8. 실전 설계 예제

### 8.1 예제: 12V 어댑터로 ESP32 + 5V 릴레이 + 3.3V 센서 구동

```
    12V 어댑터
       │
       ├──────────────────────────────────── 12V (직접 사용 안 함)
       │
       ▼
    ┌──────────┐     5V
    │  LM2596  ├──────┬──────────────────── 5V (릴레이, 5V 센서)
    │ (Buck)   │      │
    │ 12V→5V   │      │
    └──────────┘      │
                      ▼
                   ┌──────────┐     3.3V
                   │ AMS1117  ├──────────── 3.3V (ESP32, 3.3V 센서)
                   │ (LDO)    │
                   │  5V→3.3V │
                   └──────────┘

    전원 트리 (Power Tree):

    12V 어댑터 (2A)
      └─ LM2596 (12V → 5V, 효율 85%)
          ├─ 5V 릴레이 모듈: 75mA
          ├─ 5V 센서: 15mA
          └─ AMS1117 (5V → 3.3V, 효율 66%)
              ├─ ESP32: 240mA
              ├─ SHT30: 0.6mA
              └─ OLED: 20mA

    총 3.3V 전류: 260.6mA
    총 5V 전류: 75 + 15 + (260.6/0.66) = 485mA
    총 12V 전류: 485/0.85 = 570mA

    → 12V/1A 어댑터면 충분!
```

---

## 핵심 정리

```
┌─────────────────────────────────────────────────────────┐
│                      핵심 정리                           │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  1. LDO: 초과 전압을 열로 소비 → 단순하지만 비효율적    │
│     효율 = V_OUT / V_IN × 100%                         │
│                                                         │
│  2. DC-DC: 스위칭으로 효율적 변환 → 복잡하지만 고효율   │
│     효율 = 85~95%                                       │
│                                                         │
│  3. LDO 발열 = (V_IN - V_OUT) × I_OUT                  │
│     3W 이상이면 DC-DC 사용!                             │
│                                                         │
│  4. 노이즈: LDO가 깨끗, DC-DC는 리플 노이즈 있음       │
│     아날로그 회로는 LDO 사용 권장                        │
│                                                         │
│  5. 실전 조합: DC-DC(효율) + LDO(노이즈) = 최적!       │
│                                                         │
│  6. Buck(강압), Boost(승압), Buck-Boost(양방향)         │
│                                                         │
│  7. 대표 부품:                                          │
│     - LDO: AMS1117-3.3 (가장 흔함)                     │
│     - Buck: LM2596 (모듈로 쉽게 사용)                   │
│     - Boost: MT3608 (배터리 승압)                       │
│                                                         │
│  8. 배터리 프로젝트는 효율이 곧 수명!                   │
│     DC-DC 사용으로 배터리 수명 50% 이상 연장 가능       │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

---

## 연습 문제

### 문제 1: LDO 발열 계산
9V 어댑터에서 AMS1117-3.3을 사용하여 3.3V/400mA를 공급할 때,
발열량은 얼마이며 방열판이 필요한가?

<details>
<summary>정답 보기</summary>

```
P_열 = (9.0 - 3.3) × 0.4 = 5.7 × 0.4 = 2.28W

→ 2W 이상이므로 방열판이 필수!
→ 가능하면 DC-DC 컨버터로 교체하는 것이 좋습니다.

LDO 효율: 3.3/9.0 × 100 = 36.7% (매우 비효율적)
DC-DC 효율: ~90% (DC-DC가 훨씬 유리)
```
</details>

### 문제 2: 전원 설계 선택
리튬 배터리(3.7V)로 ESP32(3.3V)를 구동하려 합니다.
LDO와 DC-DC 중 어떤 것을 사용해야 하며, 그 이유는?

<details>
<summary>정답 보기</summary>

```
LDO를 사용해도 좋습니다.

이유:
1. 전압차: 3.7 - 3.3 = 0.4V (매우 작음)
2. LDO 효율: 3.3/3.7 × 100 = 89.2% (매우 높음!)
3. 발열: 0.4V × 0.24A = 0.096W (무시할 수준)
4. LDO가 더 단순하고 노이즈가 적음

단, 배터리가 방전되면(3.3V 이하) LDO는 동작 불가.
배터리를 끝까지 사용하려면 Buck-Boost DC-DC가 필요.

또한 드롭아웃 전압을 확인해야 합니다:
- AMS1117의 드롭아웃: 1.1V → 최소 입력 4.4V 필요 (부적합!)
- HT7333의 드롭아웃: 0.1V → 최소 입력 3.4V 필요 (적합!)

→ 저드롭아웃 LDO(HT7333 등)를 사용해야 합니다.
```
</details>

---

> **다음 학습**: [04-protection.md](./04-protection.md) - 회로 보호에 대해 알아봅시다.
